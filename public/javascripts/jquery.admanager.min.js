(function(a){a.AdManager=function(f,b){var e=this;e.prefix="AD_";e.ads=f;e.ad={};e.fcapLeftTime=b||3600;e.now=Date.parse(new Date())/1000;if(navigator.userLanguage){e.userLanguage=navigator.userLanguage.toLowerCase()}else{e.userLanguage=navigator.language.toLowerCase()}var g=e.prefix+"enterTime";if(typeof(a.cookie(g))=="undefined"||(e.now>(parseInt(a.cookie(g))+e.fcapLeftTime))){a.cookie(g,e.now,{expires:1,path:"/"});for(var c in f){a.cookie(e.prefix+f[c].id,0,{expires:1,path:"/"})}}e.dateByTimezone=function(h){d=new Date();utc=d.getTime()+(d.getTimezoneOffset()*60000);nd=new Date(utc+(3600000*h));return nd};e.random=function(i,h){return Math.floor(Math.random()*(h-i+1)+i)};e.weight=function(o){var n=0;var j=[];for(var h in o){n+=o[h].weight;for(var l=0;l<o[h].weight;l++){j.push(h)}}var m=e.random(0,j.length-1);return o[j[m]]};e.adSort=function(h,i){if(h.weight<i.weight){return 1}else{if(h.weight==i.weight){if(h.fcap<i.fcap){return 1}else{if(h.fcap==i.fcap){return 0}else{return -1}}}else{return -1}}};e.incrementAdCount=function(h){a.cookie(e.prefix+h,e.adCount(h)+1,{expires:1,path:"/"})};e.adCount=function(h){return(typeof(a.cookie(e.prefix+h))=="undefined")?0:parseInt(a.cookie(e.prefix+h))};e.getAd=function(h,m){var o=[];adsloop:for(var l in h){if(m==h[l].adspot){h[l].fcap=h[l].fcap||false;h[l].exclude=h[l].exclude||false;h[l].include=h[l].include||false;h[l].schedule=h[l].schedule||false;h[l].maxWidth=h[l].maxWidth||false;h[l].minWidth=h[l].minWidth||false;h[l].timezone=h[l].timezone||false;h[l].domain=h[l].domain||false;if(h[l].maxWidth&&a(window).width()>=h[l].maxWidth){continue}if(h[l].minWidth&&a(window).width()<h[l].minWidth){continue}if(h[l].fcap&&e.adCount(h[l].id)>=h[l].fcap){continue}if(h[l].exclude&&a.isArray(h[l].exclude)){for(var p in h[l].exclude){if(e.userLanguage.indexOf(h[l].exclude[p])!=-1){continue adsloop}}}if(h[l].include&&a.isArray(h[l].include)){var j=false;for(var p in h[l].include){if(e.userLanguage.indexOf(h[l].include[p])!=-1){j=true;break}}if(!j){continue adsloop}}if(h[l].domain&&a.isArray(h[l].domain)){var j=false;for(var p in h[l].domain){if(document.location.hostname.indexOf(h[l].domain[p])!=-1){j=true;break}}if(!j){continue adsloop}}if(h[l].schedule){var k=h[l].timezone?e.dateByTimezone(h[l].timezone).getDay():(new Date()).getDay();if(!h[l].schedule[k]){continue}}o.push(h[l])}}o=o.sort(e.adSort);if(o.length){if(!o[0].fcap){return e.weight(o)}else{return o[0]}}return{}};e.show=function(h){var i=e.getAd(e.ads,h);if(i.id){e.incrementAdCount(i.id);document.write(i.script||i.code)}}}}(jQuery));